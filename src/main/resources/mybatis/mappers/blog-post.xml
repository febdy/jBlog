<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="blog-post">

	<select id="getCommentList" parameterType="int" resultType="com.javaex.vo.CommentVo">		
	<![CDATA[
		SELECT cmtNo, postNo, cmtName, cmtContent, to_char(regDate, 'YYYY-MM-DD') regDate
		FROM comments
		WHERE postNo = #{postNo}
	]]>
	</select>
	
	<insert id="addComment" parameterType="com.javaex.vo.CommentVo">
		<selectKey keyProperty="cmtNo" resultType="int" order="BEFORE">
			SELECT
			seq_comments_no.nextval FROM dual
		</selectKey>
		
	<![CDATA[
		INSERT INTO comments (cmtNo, postNo, cmtName, cmtContent, regDate)
		VALUES (#{cmtNo}, #{postNo}, #{cmtName}, #{cmtContent}, sysdate)
	]]>
	</insert>
	
</mapper>